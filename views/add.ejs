<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>Mongo File Upload</title>
    <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <p class="navbar-brand">NOTES BABAI</p>
          </div>
            <div class="nav navbar-nav navbar-right">
              <!-- 6 -->
              <a href="/index">HOME</a>
              <a href="/logout">LOGOUT</a>
              <!-- <li id="home"><a href="/index">HOME</a></li>
              <li id="about"><a href="/about">ABOUT US</a></li>
              <li id="contact"><a href="/contact">CONTACT US</a></li>
              <li id="logout"><a href="/logout">LOGOUT</a></li> -->
            </ul>
        </div>
      </nav>
</head>

<h1 style="text-align: center;">Add Your Notes Here</h1>
<!-- <br> -->
<br>
<div class="box">
    
    
    
    <div class="container">
        <div class="row">
            <div class="col-md-8 col-lg-10 col-sm-10 m-auto">
                <h1 class="my-4">Lets upload some stuff</h1>
                <form action="/add" method="post" enctype="multipart/form-data">
                    <label >Department:</label>
    
    <select class= "departmentpicker" data-style="btn-info" name="departmentpicker" id="s1" onchange="change()" >
        
        <option value="">Select your Branch</option>
            <option value="CSE">CSE</option>
            <option value="ECE">ECE</option>
            <option value="EE">EE</option>
    </select>
    <br>
    <label >Subject: </label>
    <select class="subjectpicker" data-style="btn-info" name="subjectpicker" id="s2" >
        
    </select>
    <br>
                    <div class="custom-file mb-3">
                        <input type="file" class="custom-file-input" name="file" id="file1" onchange="readSingleFile(this.files)">
                        <label class="custom-file-label" for="file1" id="file-label">Choose file</label>
                    </div>
                    <input type="submit" value="Submit" class="btn btn-primary btn-block">
                </form>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        function readSingleFile(e) {
            const name = e[0].name;
            document.getElementById("file-label").textContent = name;
        }
    </script>
<%- include("partials/footer") %> 

<script>
    
    function change(){
    const data = [
    {
        "branch" : "CSE",
        "subjects" : [
            "CSE321",
            "CSE322",
            "CSE323",
            "CSE324",
            "CSE325",
            "CSE326"
        ]
    },
    {
        "branch" : "ECE",
        "subjects" : [
            "ECE321",
            "ECE322",
            "ECE323",
            "ECE324",
            "ECE325",
            "ECE326"
        ]
    },
    {
        "branch" : "EE",
        "subjects" : [
            "EE321",
            "EE322",
            "EE323",
            "EE324",
            "EE325",
            "EE326"
        ]
    },
    {
        "branch" : "ME",
        "subjects" : [
            "ME321",
            "ME322",
            "ME323",
            "ME324",
            "ME325",
            "ME326"
        ]
    },
    {
        "branch" : "CE",
        "subjects" : [
            "CE321",
            "CE322",
            "CE323",
            "CE324",
            "CE325",
            "CE326"
        ]
    },
    {
        "branch" : "MSME",
        "subjects" : [
            "MSME321",
            "MSME322",
            "MSME323",
            "MSME324",
            "MSME325",
            "MSME326"
        ]
    }
]
    // console.log(data);
    var s1 =  document.getElementById("s1")
    var s2 = document.getElementById("s2")
    console.log(String(data[0].branch));
    s2.innerHTML=""
    for(var j in data )
    {
        if(String(data[j].branch) === s1.value )
        {
            for(var i in data[j].subjects)
            {
                var option = document.createElement("option")
                option.value=String(data[j].subjects[i]);
                option.text=String(data[j].subjects[i])
                s2.appendChild(option)
            }
        }
    } 


   }
    
</script>
